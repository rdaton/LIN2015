--- cpuinfo.c.ori	2014-10-26 09:04:48.000000000 +0100
+++ cpuinfo.c	2016-10-28 14:38:27.814915041 +0200
@@ -11,7 +11,17 @@
 #ifndef SYS_read 
 #define SYS_read          0 
 #endif
+#ifndef SYS_open          
+#define SYS_open          2
+#endif
 
+#ifndef SYS_close 
+#define SYS_close          3 
+#endif
+
+#ifndef SYS_write
+#define SYS_write          1 
+#endif
 
 int main(void)
 {
@@ -20,26 +30,36 @@ int main(void)
     char buf[BUFSIZE+1];
     
     /* Open /proc entry in read-only mode */
-    fd=open("/proc/cpuinfo",O_RDONLY);
+    //fd=open("/proc/cpuinfo",O_RDONLY);
+    
+    int op=0;
+    fd=syscall(SYS_open,"/proc/cpuinfo",O_RDONLY);
     
+
     if (fd<0){
         fprintf(stderr,"Can't open the file\n");
         exit(1);
     }
     
+    int write_chars=0;
     /* Loop that reads data from the file and prints its contents to stdout */
     while((read_chars=syscall(SYS_read,fd,buf,BUFSIZE))>0){
         buf[read_chars]='\0';
-        printf("%s",buf);            
-    }
-     
+        syscall(SYS_write,1,buf,sizeof(buf));
+      }
+
     if (read_chars<0){
         fprintf(stderr,"Error while reading the file\n");
         exit(1);        
     }
     
-    	
-    /* Close the file and exit */ 
-    close(fd);
+    if(write_chars<0){
+         fprintf(stderr,"Error while writting the file\n");
+            exit(1);
+    }       
+        
+
+    syscall(SYS_close,fd);
+
     return 0;
 }
